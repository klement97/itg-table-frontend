<section>
    <div class="header">
        <h4>Lista e porosive</h4>
    </div>
    <div style="height: 5px">
        <mat-progress-bar style="height: 5px" *ngIf="loading" mode="indeterminate"></mat-progress-bar>
    </div>
    <table matSort (matSortChange)="changeSort($event)" mat-table [dataSource]="orders$ | async"
           class="mat-elevation-z4 data-table" style="overflow-x: auto">

        <!-- ID -->
        <ng-container matColumnDef="id">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let order"> {{order.id}} </td>
        </ng-container>

        <!-- Customer -->
        <ng-container matColumnDef="customer">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> Klienti</th>
            <td mat-cell *matCellDef="let order"> {{order.customer}} </td>
        </ng-container>

        <!-- Date Created -->
        <ng-container matColumnDef="date_created">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> Data</th>
            <td mat-cell *matCellDef="let order"> {{order.date_created}} </td>
        </ng-container>

        <!-- Total Price -->
        <ng-container matColumnDef="total_price">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> Çmimi total</th>
            <td mat-cell *matCellDef="let order"> ${{order.total_price}}</td>
        </ng-container>

        <!-- Total Table Count -->
        <ng-container matColumnDef="total_table_count">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> Numri total i tabakave</th>
            <td mat-cell *matCellDef="let order"> {{order.total_table_count}} copë</td>
        </ng-container>

        <!-- Actions -->
        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Veprime</th>
            <td mat-cell *matCellDef="let order">
                <span style="display: flex; flex-direction: row">
                    <button mat-icon-button (click)="showDetails(order)"><mat-icon style="opacity: 0.7">visibility</mat-icon></button>
                    <a mat-icon-button (click)="updateOrder(order.id)"><mat-icon style="opacity: 0.7">build</mat-icon></a>
                    <button mat-icon-button (click)="deleteOrder(order.id)"><mat-icon style="opacity: 0.7">delete_sweep</mat-icon></button>
                  <button mat-icon-button (click)="openEmailSendDialog(order)"><mat-icon style="opacity: 0.7;">email</mat-icon></button>
                </span>
            </td>
        </ng-container>

        <!-- Header and Row Declarations -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <mat-paginator #paginator pageSize="10" [length]="count" showFirstLastButtons (page)="changePage()"></mat-paginator>
</section>
